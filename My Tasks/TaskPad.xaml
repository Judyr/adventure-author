<UserControl x:Class="AdventureAuthor.Tasks.TaskPad"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  	xmlns:PresentationOptions="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options" 
    xmlns:tasks="clr-namespace:AdventureAuthor.Tasks"
	Width="420" Height="500">
	
	<UserControl.Resources>
		
		<tasks:TaskStateToBooleanConverter x:Key="taskCompletedConverter"/>	
		
		<DataTemplate x:Key="taskDataTemplate">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition/>
					<RowDefinition/>
				</Grid.RowDefinitions>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="0.67*"/>
					<ColumnDefinition Width="55"/>
				</Grid.ColumnDefinitions>
			
				<TextBox Grid.Row="0" Grid.Column="0"
				           Width="300"
						   Text="{Binding Path=Description}"
				           TextWrapping="Wrap"
				           VerticalAlignment="Center"
				           HorizontalAlignment="Right"
				           Padding="10"
					       FontSize="16" 
				           FontWeight="Thin"
				           Foreground="Black">
						<TextBox.TextDecorations>
							<TextDecoration Location="Strikethrough"/>
						</TextBox.TextDecorations>
				</TextBox>
				<ListBox Grid.Row="1" Grid.Column="0"
							Margin="5"
							ItemsSource="{Binding Path=Tags}"/>
				<CheckBox x:Name="completedCheckBox"
				          Grid.Row="0" Grid.RowSpan="2" Grid.Column="1"
				          VerticalAlignment="Center" HorizontalAlignment="Center"
						  IsChecked="{Binding Path=State, Converter={StaticResource taskCompletedConverter}}">
					<CheckBox.LayoutTransform>
						<ScaleTransform ScaleX="2" ScaleY="2"
										PresentationOptions:Freeze="true"/>
					</CheckBox.LayoutTransform>
				</CheckBox>		
			</Grid>				
		</DataTemplate>
	
	</UserControl.Resources>
	
	<UserControl.Background>
		<LinearGradientBrush StartPoint="1,0" EndPoint="0,1" PresentationOptions:Freeze="true">
			<GradientStop Color="LemonChiffon" Offset="1.5"/>
			<GradientStop Color="Yellow" Offset="4"/>
		</LinearGradientBrush>
	</UserControl.Background>
		
    <Border BorderThickness="2" BorderBrush="LightGray">
		
    	<!--<Border.BitmapEffect>
    		<DropShadowBitmapEffect PresentationOptions:Freeze="true"/>
    	</Border.BitmapEffect>-->
    	
		<Grid Name="MainGrid">
    		<Grid.RowDefinitions>
				<RowDefinition Height="70"/>
				<RowDefinition Height="*"/>
				<RowDefinition Height="100"/>
			</Grid.RowDefinitions>
			
			<TextBlock Grid.Row="0"
			           Grid.Column="0"
					   Text="Things To Do" 
			           VerticalAlignment="Center"
			           HorizontalAlignment="Center"
			           FontSize="32" 
			           FontWeight="SemiBold" 
			           FontFamily="Comic Sans MS"
					   Foreground="DarkBlue"/>
			
			<ListBox Grid.Row="1"
					 Grid.Column="0"
			         Padding="15"
					 ItemsSource="{Binding Path=Tasks, Mode=TwoWay}"
					 ItemTemplate="{StaticResource taskDataTemplate}"
					 Background="Transparent"
					 BorderBrush="Transparent"/>
			
			<tasks:DogEar Grid.Row="2" Grid.Column="0"
			              Corner="BottomRight"/>
			<tasks:DogEar Grid.Row="2" Grid.Column="0"
			              Corner="BottomLeft"/>
    	</Grid>
	</Border>

</UserControl>